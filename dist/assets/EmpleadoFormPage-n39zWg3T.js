import{f as E,au as v,c as N,j as e,B as d,T}from"./index--atX_XUv.js";import{u as S,d as W}from"./Save-BjSFydXk.js";import{d as A}from"./ArrowBack-lqHG2J96.js";import{u as q,g as C}from"./useEmpleadosStore-qJqbdYvt.js";import{A as b}from"./AppButton-DGApZOMm.js";import{T as i}from"./TextField-BTw6FAe8.js";import"./Button-C1kfnTXj.js";const k=()=>{var m,u,p,c;const n=E(),[f]=v(),l=f.get("id"),{create:x,update:g,loading:h}=q(),{register:t,handleSubmit:j,setValue:s,formState:{errors:o}}=S({defaultValues:{nombre:"",apellido:"",cargo:"",salario:void 0,edad:void 0}});N.useEffect(()=>{const a=l?Number(l):null;a&&C(a).then(r=>{s("nombre",r.nombre),s("apellido",r.apellido),s("cargo",r.cargo??""),r.salario!=null&&s("salario",r.salario),r.edad!=null&&s("edad",r.edad)}).catch(()=>{})},[l,s]);const y=async a=>{const r={nombre:a.nombre,apellido:a.apellido,cargo:a.cargo,salario:a.salario?Number(a.salario):void 0,edad:a.edad?Number(a.edad):void 0};l?await g(Number(l),r):await x(r),n("/empleados")};return e.jsxs(d,{children:[e.jsxs(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(T,{variant:"h5",children:l?"Editar empleado":"Nuevo empleado"}),e.jsx(b,{startIcon:e.jsx(A,{}),onClick:()=>n("/empleados"),children:"Volver"})]}),e.jsxs(d,{component:"form",onSubmit:j(y),maxWidth:480,display:"flex",flexDirection:"column",gap:2,children:[e.jsx(i,{label:"Nombre",fullWidth:!0,error:!!o.nombre,helperText:(m=o.nombre)==null?void 0:m.message,...t("nombre",{required:"El nombre es requerido"})}),e.jsx(i,{label:"Apellido",fullWidth:!0,error:!!o.apellido,helperText:(u=o.apellido)==null?void 0:u.message,...t("apellido",{required:"El apellido es requerido"})}),e.jsx(i,{label:"Cargo",fullWidth:!0,...t("cargo")}),e.jsx(i,{label:"Salario",type:"number",fullWidth:!0,...t("salario",{valueAsNumber:!0,min:{value:0,message:"El salario debe ser positivo"}}),error:!!o.salario,helperText:(p=o.salario)==null?void 0:p.message}),e.jsx(i,{label:"Edad",type:"number",fullWidth:!0,...t("edad",{valueAsNumber:!0,min:{value:0,message:"La edad debe ser positiva"}}),error:!!o.edad,helperText:(c=o.edad)==null?void 0:c.message}),e.jsx(d,{display:"flex",justifyContent:"flex-end",gap:1,mt:2,children:e.jsx(b,{startIcon:e.jsx(W,{}),type:"submit",disabled:h,children:"Guardar"})})]})]})};export{k as EmpleadoFormPage,k as default};
