import{z as o,A as s}from"./index--atX_XUv.js";function n(r){return{id:r.ID_PRESTATARIO??r.id_prestatario,ci:r.CI??r.ci,nombre:r.NOMBRE??r.nombre,apellido:r.APELLIDO??r.apellido,direccion:r.DIRECCION??r.direccion,email:r.EMAIL??r.email,telefono:r.TELEFONO??r.telefono,fechaNacimiento:r.FECHA_NACIMIENTO??r.fecha_nacimiento,estadoCliente:r.ESTADO_CLIENTE??r.estado_cliente,fechaRegistro:r.FECHA_REGISTRO??r.fecha_registro,usuarioRegistro:r.USUARIO_REGISTRO??r.usuario_registro}}function c(r){return(r||[]).map(n)}function l(r){return(r||[]).map(a=>({idLog:a.ID_LOG_PK??a.id_log_pk,nombreArchivo:a.NOMBRE_ARCHIVO??a.nombre_archivo,fechaCarga:a.FECHA_CARGA??a.fecha_carga,usuario:a.USUARIO??a.usuario,registrosValidos:a.REGISTROS_VALIDOS??a.registros_validos,registrosRechazados:a.REGISTROS_RECHAZADOS??a.registros_rechazados,detalles:a.detalles??a.DETALLES??[]}))}async function d(){const r=await o.get("/api/prestatarios");if(!r.data.ok)throw new Error(r.data.error||"Error al cargar prestatarios");return c(r.data.result)}async function p(r){const a=await o.post("/api/prestatarios",r);if(!a.data.ok)throw new Error(a.data.error||"Error al crear prestatario")}async function g(r,a){const e=await o.put(`/api/prestatarios/${r}`,a);if(!e.data.ok)throw new Error(e.data.error||"Error al actualizar prestatario")}async function E(r){const a=await o.delete(`/api/prestatarios/${r}`);if(!a.data.ok)throw new Error(a.data.error||"Error al eliminar prestatario")}async function f(r){const a=await o.post("/api/prestatarios/carga",r);if(!a.data.ok)throw new Error(a.data.error||"Error en carga masiva");return a.data.result}async function m(){const r=await o.get("/api/prestatarios/obtener-logs-carga");if(!r.data.ok)throw new Error(r.data.error||"Error al obtener logs de carga");return l(r.data.result)}const A=s((r,a)=>({items:[],loading:!1,error:void 0,async fetchAll(){r({loading:!0,error:void 0});try{const e=await d();r({items:e,loading:!1})}catch(e){r({error:e.message??"Error al cargar prestatarios",loading:!1})}},async create(e){r({loading:!0,error:void 0});try{await p(e),await a().fetchAll()}catch(t){r({error:t.message??"Error al crear prestatario",loading:!1})}},async update(e,t){r({loading:!0,error:void 0});try{await g(e,t),await a().fetchAll()}catch(i){r({error:i.message??"Error al actualizar prestatario",loading:!1})}},async remove(e){r({loading:!0,error:void 0});try{await E(e),await a().fetchAll()}catch(t){r({error:t.message??"Error al eliminar prestatario",loading:!1})}}}));export{f as c,m as o,A as u};
